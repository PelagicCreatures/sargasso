var SargassoModule=function(e){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function s(e){var t={exports:{}};return e(t,t.exports),t.exports}var n="object"==typeof t&&t&&t.Object===Object&&t,r="object"==typeof self&&self&&self.Object===Object&&self,i=n||r||Function("return this")(),o=i.Symbol;var a=function(e,t){for(var s=-1,n=null==e?0:e.length,r=Array(n);++s<n;)r[s]=t(e[s],s,e);return r},c=Array.isArray,l=Object.prototype,u=l.hasOwnProperty,h=l.toString,d=o?o.toStringTag:void 0;var p=function(e){var t=u.call(e,d),s=e[d];try{e[d]=void 0;var n=!0}catch(e){}var r=h.call(e);return n&&(t?e[d]=s:delete e[d]),r},f=Object.prototype.toString;var v=function(e){return f.call(e)},m=o?o.toStringTag:void 0;var b=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":m&&m in Object(e)?p(e):v(e)};var g=function(e){return null!=e&&"object"==typeof e};var w=function(e){return"symbol"==typeof e||g(e)&&"[object Symbol]"==b(e)},y=o?o.prototype:void 0,_=y?y.toString:void 0;var x=function e(t){if("string"==typeof t)return t;if(c(t))return a(t,e)+"";if(w(t))return _?_.call(t):"";var s=t+"";return"0"==s&&1/t==-Infinity?"-0":s};var O=function(e){return null==e?"":x(e)};var j=function(e,t,s){var n=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(s=s>r?r:s)<0&&(s+=r),r=t>s?0:s-t>>>0,t>>>=0;for(var i=Array(r);++n<r;)i[n]=e[n+t];return i};var E=function(e,t,s){var n=e.length;return s=void 0===s?n:s,!t&&s>=n?e:j(e,t,s)},A=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var S=function(e){return A.test(e)};var k=function(e){return e.split("")},N="[\\ud800-\\udfff]",C="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",M="\\ud83c[\\udffb-\\udfff]",T="[^\\ud800-\\udfff]",V="(?:\\ud83c[\\udde6-\\uddff]){2}",L="[\\ud800-\\udbff][\\udc00-\\udfff]",R="(?:"+C+"|"+M+")"+"?",F="[\\ufe0e\\ufe0f]?",P=F+R+("(?:\\u200d(?:"+[T,V,L].join("|")+")"+F+R+")*"),z="(?:"+[T+C+"?",C,V,L,N].join("|")+")",D=RegExp(M+"(?="+M+")|"+z+P,"g");var H=function(e){return e.match(D)||[]};var W=function(e){return S(e)?H(e):k(e)};var I=function(e){return function(t){t=O(t);var s=S(t)?W(t):void 0,n=s?s[0]:t.charAt(0),r=s?E(s,1).join(""):t.slice(1);return n[e]()+r}}("toUpperCase");var B=function(e){return I(O(e).toLowerCase())};var q=function(e,t,s,n){var r=-1,i=null==e?0:e.length;for(n&&i&&(s=e[++r]);++r<i;)s=t(s,e[r],r,e);return s};var U=function(e){return function(t){return null==e?void 0:e[t]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),$=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Q=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var G=function(e){return(e=O(e))&&e.replace($,U).replace(Q,"")},Z=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var J=function(e){return e.match(Z)||[]},Y=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var K=function(e){return Y.test(e)},X="\\u2700-\\u27bf",ee="a-z\\xdf-\\xf6\\xf8-\\xff",te="A-Z\\xc0-\\xd6\\xd8-\\xde",se="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ne="["+se+"]",re="\\d+",ie="[\\u2700-\\u27bf]",oe="["+ee+"]",ae="[^\\ud800-\\udfff"+se+re+X+ee+te+"]",ce="(?:\\ud83c[\\udde6-\\uddff]){2}",le="[\\ud800-\\udbff][\\udc00-\\udfff]",ue="["+te+"]",he="(?:"+oe+"|"+ae+")",de="(?:"+ue+"|"+ae+")",pe="(?:['’](?:d|ll|m|re|s|t|ve))?",fe="(?:['’](?:D|LL|M|RE|S|T|VE))?",ve="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",me="[\\ufe0e\\ufe0f]?",be=me+ve+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",ce,le].join("|")+")"+me+ve+")*"),ge="(?:"+[ie,ce,le].join("|")+")"+be,we=RegExp([ue+"?"+oe+"+"+pe+"(?="+[ne,ue,"$"].join("|")+")",de+"+"+fe+"(?="+[ne,ue+he,"$"].join("|")+")",ue+"?"+he+"+"+pe,ue+"+"+fe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",re,ge].join("|"),"g");var ye=function(e){return e.match(we)||[]};var _e=function(e,t,s){return e=O(e),void 0===(t=s?void 0:t)?K(e)?ye(e):J(e):e.match(t)||[]},xe=RegExp("['’]","g");var Oe=function(e){return function(t){return q(_e(G(t).replace(xe,"")),e,"")}},je=Oe((function(e,t,s){return t=t.toLowerCase(),e+(s?B(t):t)}));var Ee=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Ae=function(){return i.Date.now()},Se=/\s/;var ke=function(e){for(var t=e.length;t--&&Se.test(e.charAt(t)););return t},Ne=/^\s+/;var Ce=function(e){return e?e.slice(0,ke(e)+1).replace(Ne,""):e},Me=/^[-+]0x[0-9a-f]+$/i,Te=/^0b[01]+$/i,Ve=/^0o[0-7]+$/i,Le=parseInt;var Re=function(e){if("number"==typeof e)return e;if(w(e))return NaN;if(Ee(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ee(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Ce(e);var s=Te.test(e);return s||Ve.test(e)?Le(e.slice(2),s?2:8):Me.test(e)?NaN:+e},Fe=Math.max,Pe=Math.min;var ze=function(e,t,s){var n,r,i,o,a,c,l=0,u=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var s=n,i=r;return n=r=void 0,l=t,o=e.apply(i,s)}function f(e){return l=e,a=setTimeout(m,t),u?p(e):o}function v(e){var s=e-c;return void 0===c||s>=t||s<0||h&&e-l>=i}function m(){var e=Ae();if(v(e))return b(e);a=setTimeout(m,function(e){var s=t-(e-c);return h?Pe(s,i-(e-l)):s}(e))}function b(e){return a=void 0,d&&n?p(e):(n=r=void 0,o)}function g(){var e=Ae(),s=v(e);if(n=arguments,r=this,c=e,s){if(void 0===a)return f(c);if(h)return clearTimeout(a),a=setTimeout(m,t),p(c)}return void 0===a&&(a=setTimeout(m,t)),o}return t=Re(t)||0,Ee(s)&&(u=!!s.leading,i=(h="maxWait"in s)?Fe(Re(s.maxWait)||0,t):i,d="trailing"in s?!!s.trailing:d),g.cancel=function(){void 0!==a&&clearTimeout(a),l=0,n=c=r=a=void 0},g.flush=function(){return void 0===a?o:b(Ae())},g},De=Oe((function(e,t,s){return e+(s?"-":"")+t.toLowerCase()}));var He=function(){this.__data__=[],this.size=0};var We=function(e,t){return e===t||e!=e&&t!=t};var Ie=function(e,t){for(var s=e.length;s--;)if(We(e[s][0],t))return s;return-1},Be=Array.prototype.splice;var qe=function(e){var t=this.__data__,s=Ie(t,e);return!(s<0)&&(s==t.length-1?t.pop():Be.call(t,s,1),--this.size,!0)};var Ue=function(e){var t=this.__data__,s=Ie(t,e);return s<0?void 0:t[s][1]};var $e=function(e){return Ie(this.__data__,e)>-1};var Qe=function(e,t){var s=this.__data__,n=Ie(s,e);return n<0?(++this.size,s.push([e,t])):s[n][1]=t,this};function Ge(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var n=e[t];this.set(n[0],n[1])}}Ge.prototype.clear=He,Ge.prototype.delete=qe,Ge.prototype.get=Ue,Ge.prototype.has=$e,Ge.prototype.set=Qe;var Ze=Ge;var Je=function(){this.__data__=new Ze,this.size=0};var Ye=function(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s};var Ke=function(e){return this.__data__.get(e)};var Xe=function(e){return this.__data__.has(e)};var et,tt=function(e){if(!Ee(e))return!1;var t=b(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},st=i["__core-js_shared__"],nt=(et=/[^.]+$/.exec(st&&st.keys&&st.keys.IE_PROTO||""))?"Symbol(src)_1."+et:"";var rt=function(e){return!!nt&&nt in e},it=Function.prototype.toString;var ot=function(e){if(null!=e){try{return it.call(e)}catch(e){}try{return e+""}catch(e){}}return""},at=/^\[object .+?Constructor\]$/,ct=Function.prototype,lt=Object.prototype,ut=ct.toString,ht=lt.hasOwnProperty,dt=RegExp("^"+ut.call(ht).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var pt=function(e){return!(!Ee(e)||rt(e))&&(tt(e)?dt:at).test(ot(e))};var ft=function(e,t){return null==e?void 0:e[t]};var vt=function(e,t){var s=ft(e,t);return pt(s)?s:void 0},mt=vt(i,"Map"),bt=vt(Object,"create");var gt=function(){this.__data__=bt?bt(null):{},this.size=0};var wt=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},yt=Object.prototype.hasOwnProperty;var _t=function(e){var t=this.__data__;if(bt){var s=t[e];return"__lodash_hash_undefined__"===s?void 0:s}return yt.call(t,e)?t[e]:void 0},xt=Object.prototype.hasOwnProperty;var Ot=function(e){var t=this.__data__;return bt?void 0!==t[e]:xt.call(t,e)};var jt=function(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=bt&&void 0===t?"__lodash_hash_undefined__":t,this};function Et(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var n=e[t];this.set(n[0],n[1])}}Et.prototype.clear=gt,Et.prototype.delete=wt,Et.prototype.get=_t,Et.prototype.has=Ot,Et.prototype.set=jt;var At=Et;var St=function(){this.size=0,this.__data__={hash:new At,map:new(mt||Ze),string:new At}};var kt=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Nt=function(e,t){var s=e.__data__;return kt(t)?s["string"==typeof t?"string":"hash"]:s.map};var Ct=function(e){var t=Nt(this,e).delete(e);return this.size-=t?1:0,t};var Mt=function(e){return Nt(this,e).get(e)};var Tt=function(e){return Nt(this,e).has(e)};var Vt=function(e,t){var s=Nt(this,e),n=s.size;return s.set(e,t),this.size+=s.size==n?0:1,this};function Lt(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var n=e[t];this.set(n[0],n[1])}}Lt.prototype.clear=St,Lt.prototype.delete=Ct,Lt.prototype.get=Mt,Lt.prototype.has=Tt,Lt.prototype.set=Vt;var Rt=Lt;var Ft=function(e,t){var s=this.__data__;if(s instanceof Ze){var n=s.__data__;if(!mt||n.length<199)return n.push([e,t]),this.size=++s.size,this;s=this.__data__=new Rt(n)}return s.set(e,t),this.size=s.size,this};function Pt(e){var t=this.__data__=new Ze(e);this.size=t.size}Pt.prototype.clear=Je,Pt.prototype.delete=Ye,Pt.prototype.get=Ke,Pt.prototype.has=Xe,Pt.prototype.set=Ft;var zt=Pt;var Dt=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var Ht=function(e){return this.__data__.has(e)};function Wt(e){var t=-1,s=null==e?0:e.length;for(this.__data__=new Rt;++t<s;)this.add(e[t])}Wt.prototype.add=Wt.prototype.push=Dt,Wt.prototype.has=Ht;var It=Wt;var Bt=function(e,t){for(var s=-1,n=null==e?0:e.length;++s<n;)if(t(e[s],s,e))return!0;return!1};var qt=function(e,t){return e.has(t)};var Ut=function(e,t,s,n,r,i){var o=1&s,a=e.length,c=t.length;if(a!=c&&!(o&&c>a))return!1;var l=i.get(e),u=i.get(t);if(l&&u)return l==t&&u==e;var h=-1,d=!0,p=2&s?new It:void 0;for(i.set(e,t),i.set(t,e);++h<a;){var f=e[h],v=t[h];if(n)var m=o?n(v,f,h,t,e,i):n(f,v,h,e,t,i);if(void 0!==m){if(m)continue;d=!1;break}if(p){if(!Bt(t,(function(e,t){if(!qt(p,t)&&(f===e||r(f,e,s,n,i)))return p.push(t)}))){d=!1;break}}else if(f!==v&&!r(f,v,s,n,i)){d=!1;break}}return i.delete(e),i.delete(t),d},$t=i.Uint8Array;var Qt=function(e){var t=-1,s=Array(e.size);return e.forEach((function(e,n){s[++t]=[n,e]})),s};var Gt=function(e){var t=-1,s=Array(e.size);return e.forEach((function(e){s[++t]=e})),s},Zt=o?o.prototype:void 0,Jt=Zt?Zt.valueOf:void 0;var Yt=function(e,t,s,n,r,i,o){switch(s){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new $t(e),new $t(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return We(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=Qt;case"[object Set]":var c=1&n;if(a||(a=Gt),e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;n|=2,o.set(e,t);var u=Ut(a(e),a(t),n,r,i,o);return o.delete(e),u;case"[object Symbol]":if(Jt)return Jt.call(e)==Jt.call(t)}return!1};var Kt=function(e,t){for(var s=-1,n=t.length,r=e.length;++s<n;)e[r+s]=t[s];return e};var Xt=function(e,t,s){var n=t(e);return c(e)?n:Kt(n,s(e))};var es=function(e,t){for(var s=-1,n=null==e?0:e.length,r=0,i=[];++s<n;){var o=e[s];t(o,s,e)&&(i[r++]=o)}return i};var ts=function(){return[]},ss=Object.prototype.propertyIsEnumerable,ns=Object.getOwnPropertySymbols,rs=ns?function(e){return null==e?[]:(e=Object(e),es(ns(e),(function(t){return ss.call(e,t)})))}:ts;var is=function(e,t){for(var s=-1,n=Array(e);++s<e;)n[s]=t(s);return n};var os=function(e){return g(e)&&"[object Arguments]"==b(e)},as=Object.prototype,cs=as.hasOwnProperty,ls=as.propertyIsEnumerable,us=os(function(){return arguments}())?os:function(e){return g(e)&&cs.call(e,"callee")&&!ls.call(e,"callee")};var hs=function(){return!1},ds=s((function(e,t){var s=t&&!t.nodeType&&t,n=s&&e&&!e.nodeType&&e,r=n&&n.exports===s?i.Buffer:void 0,o=(r?r.isBuffer:void 0)||hs;e.exports=o})),ps=/^(?:0|[1-9]\d*)$/;var fs=function(e,t){var s=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==s||"symbol"!=s&&ps.test(e))&&e>-1&&e%1==0&&e<t};var vs=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},ms={};ms["[object Float32Array]"]=ms["[object Float64Array]"]=ms["[object Int8Array]"]=ms["[object Int16Array]"]=ms["[object Int32Array]"]=ms["[object Uint8Array]"]=ms["[object Uint8ClampedArray]"]=ms["[object Uint16Array]"]=ms["[object Uint32Array]"]=!0,ms["[object Arguments]"]=ms["[object Array]"]=ms["[object ArrayBuffer]"]=ms["[object Boolean]"]=ms["[object DataView]"]=ms["[object Date]"]=ms["[object Error]"]=ms["[object Function]"]=ms["[object Map]"]=ms["[object Number]"]=ms["[object Object]"]=ms["[object RegExp]"]=ms["[object Set]"]=ms["[object String]"]=ms["[object WeakMap]"]=!1;var bs=function(e){return g(e)&&vs(e.length)&&!!ms[b(e)]};var gs=function(e){return function(t){return e(t)}},ws=s((function(e,t){var s=t&&!t.nodeType&&t,r=s&&e&&!e.nodeType&&e,i=r&&r.exports===s&&n.process,o=function(){try{var e=r&&r.require&&r.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=o})),ys=ws&&ws.isTypedArray,_s=ys?gs(ys):bs,xs=Object.prototype.hasOwnProperty;var Os=function(e,t){var s=c(e),n=!s&&us(e),r=!s&&!n&&ds(e),i=!s&&!n&&!r&&_s(e),o=s||n||r||i,a=o?is(e.length,String):[],l=a.length;for(var u in e)!t&&!xs.call(e,u)||o&&("length"==u||r&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||fs(u,l))||a.push(u);return a},js=Object.prototype;var Es=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||js)};var As=function(e,t){return function(s){return e(t(s))}}(Object.keys,Object),Ss=Object.prototype.hasOwnProperty;var ks=function(e){if(!Es(e))return As(e);var t=[];for(var s in Object(e))Ss.call(e,s)&&"constructor"!=s&&t.push(s);return t};var Ns=function(e){return null!=e&&vs(e.length)&&!tt(e)};var Cs=function(e){return Ns(e)?Os(e):ks(e)};var Ms=function(e){return Xt(e,Cs,rs)},Ts=Object.prototype.hasOwnProperty;var Vs=function(e,t,s,n,r,i){var o=1&s,a=Ms(e),c=a.length;if(c!=Ms(t).length&&!o)return!1;for(var l=c;l--;){var u=a[l];if(!(o?u in t:Ts.call(t,u)))return!1}var h=i.get(e),d=i.get(t);if(h&&d)return h==t&&d==e;var p=!0;i.set(e,t),i.set(t,e);for(var f=o;++l<c;){var v=e[u=a[l]],m=t[u];if(n)var b=o?n(m,v,u,t,e,i):n(v,m,u,e,t,i);if(!(void 0===b?v===m||r(v,m,s,n,i):b)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var g=e.constructor,w=t.constructor;g==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof w&&w instanceof w||(p=!1)}return i.delete(e),i.delete(t),p},Ls=vt(i,"DataView"),Rs=vt(i,"Promise"),Fs=vt(i,"Set"),Ps=vt(i,"WeakMap"),zs="[object Map]",Ds="[object Promise]",Hs="[object Set]",Ws="[object WeakMap]",Is="[object DataView]",Bs=ot(Ls),qs=ot(mt),Us=ot(Rs),$s=ot(Fs),Qs=ot(Ps),Gs=b;(Ls&&Gs(new Ls(new ArrayBuffer(1)))!=Is||mt&&Gs(new mt)!=zs||Rs&&Gs(Rs.resolve())!=Ds||Fs&&Gs(new Fs)!=Hs||Ps&&Gs(new Ps)!=Ws)&&(Gs=function(e){var t=b(e),s="[object Object]"==t?e.constructor:void 0,n=s?ot(s):"";if(n)switch(n){case Bs:return Is;case qs:return zs;case Us:return Ds;case $s:return Hs;case Qs:return Ws}return t});var Zs=Gs,Js="[object Arguments]",Ys="[object Array]",Ks="[object Object]",Xs=Object.prototype.hasOwnProperty;var en=function(e,t,s,n,r,i){var o=c(e),a=c(t),l=o?Ys:Zs(e),u=a?Ys:Zs(t),h=(l=l==Js?Ks:l)==Ks,d=(u=u==Js?Ks:u)==Ks,p=l==u;if(p&&ds(e)){if(!ds(t))return!1;o=!0,h=!1}if(p&&!h)return i||(i=new zt),o||_s(e)?Ut(e,t,s,n,r,i):Yt(e,t,l,s,n,r,i);if(!(1&s)){var f=h&&Xs.call(e,"__wrapped__"),v=d&&Xs.call(t,"__wrapped__");if(f||v){var m=f?e.value():e,b=v?t.value():t;return i||(i=new zt),r(m,b,s,n,i)}}return!!p&&(i||(i=new zt),Vs(e,t,s,n,r,i))};var tn=function e(t,s,n,r,i){return t===s||(null==t||null==s||!g(t)&&!g(s)?t!=t&&s!=s:en(t,s,n,r,e,i))};var sn=function(e,t){return tn(e,t)},nn=s((function(e,t){!function(t){if(e.exports=t(),!!0){var s=window.Cookies,n=window.Cookies=t();n.noConflict=function(){return window.Cookies=s,n}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var s=arguments[e];for(var n in s)t[n]=s[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function s(n){function r(){}function i(t,s,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},r.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var o=JSON.stringify(s);/^[\{\[]/.test(o)&&(s=o)}catch(e){}s=n.write?n.write(s,t):encodeURIComponent(String(s)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in i)i[c]&&(a+="; "+c,!0!==i[c]&&(a+="="+i[c].split(";")[0]));return document.cookie=t+"="+s+a}}function o(e,s){if("undefined"!=typeof document){for(var r={},i=document.cookie?document.cookie.split("; "):[],o=0;o<i.length;o++){var a=i[o].split("="),c=a.slice(1).join("=");s||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(a[0]);if(c=(n.read||n)(c,l)||t(c),s)try{c=JSON.parse(c)}catch(e){}if(r[l]=c,e===l)break}catch(e){}}return e?r[e]:r}}return r.set=i,r.get=function(e){return o(e,!1)},r.getJSON=function(e){return o(e,!0)},r.remove=function(t,s){i(t,"",e(s,{expires:-1}))},r.defaults={},r.withConverter=s,r}((function(){}))}))}));const rn=new WeakMap,on=e=>(...t)=>{const s=e(...t);return rn.set(s,!0),s},an=e=>"function"==typeof e&&rn.has(e),cn="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,ln=(e,t,s=null,n=null)=>{for(;t!==s;){const s=t.nextSibling;e.insertBefore(t,n),t=s}},un=(e,t,s=null)=>{for(;t!==s;){const s=t.nextSibling;e.removeChild(t),t=s}},hn={},dn={},pn=`{{lit-${String(Math.random()).slice(2)}}}`,fn=`\x3c!--${pn}--\x3e`,vn=new RegExp(`${pn}|${fn}`),mn="$lit$";class bn{constructor(e,t){this.parts=[],this.element=t;const s=[],n=[],r=document.createTreeWalker(t.content,133,null,!1);let i=0,o=-1,a=0;const{strings:c,values:{length:l}}=e;for(;a<l;){const e=r.nextNode();if(null!==e){if(o++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:s}=t;let n=0;for(let e=0;e<s;e++)gn(t[e].name,mn)&&n++;for(;n-- >0;){const t=c[a],s=_n.exec(t)[2],n=s.toLowerCase()+mn,r=e.getAttribute(n);e.removeAttribute(n);const i=r.split(vn);this.parts.push({type:"attribute",index:o,name:s,strings:i}),a+=i.length-1}}"TEMPLATE"===e.tagName&&(n.push(e),r.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(pn)>=0){const n=e.parentNode,r=t.split(vn),i=r.length-1;for(let t=0;t<i;t++){let s,i=r[t];if(""===i)s=yn();else{const e=_n.exec(i);null!==e&&gn(e[2],mn)&&(i=i.slice(0,e.index)+e[1]+e[2].slice(0,-mn.length)+e[3]),s=document.createTextNode(i)}n.insertBefore(s,e),this.parts.push({type:"node",index:++o})}""===r[i]?(n.insertBefore(yn(),e),s.push(e)):e.data=r[i],a+=i}}else if(8===e.nodeType)if(e.data===pn){const t=e.parentNode;null!==e.previousSibling&&o!==i||(o++,t.insertBefore(yn(),e)),i=o,this.parts.push({type:"node",index:o}),null===e.nextSibling?e.data="":(s.push(e),o--),a++}else{let t=-1;for(;-1!==(t=e.data.indexOf(pn,t+1));)this.parts.push({type:"node",index:-1}),a++}}else r.currentNode=n.pop()}for(const e of s)e.parentNode.removeChild(e)}}const gn=(e,t)=>{const s=e.length-t.length;return s>=0&&e.slice(s)===t},wn=e=>-1!==e.index,yn=()=>document.createComment(""),_n=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class xn{constructor(e,t,s){this.__parts=[],this.template=e,this.processor=t,this.options=s}update(e){let t=0;for(const s of this.__parts)void 0!==s&&s.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=cn?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],s=this.template.parts,n=document.createTreeWalker(e,133,null,!1);let r,i=0,o=0,a=n.nextNode();for(;i<s.length;)if(r=s[i],wn(r)){for(;o<r.index;)o++,"TEMPLATE"===a.nodeName&&(t.push(a),n.currentNode=a.content),null===(a=n.nextNode())&&(n.currentNode=t.pop(),a=n.nextNode());if("node"===r.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(a.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(a,r.name,r.strings,this.options));i++}else this.__parts.push(void 0),i++;return cn&&(document.adoptNode(e),customElements.upgrade(e)),e}}const On=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e}),jn=` ${pn} `;class En{constructor(e,t,s,n){this.strings=e,this.values=t,this.type=s,this.processor=n}getHTML(){const e=this.strings.length-1;let t="",s=!1;for(let n=0;n<e;n++){const e=this.strings[n],r=e.lastIndexOf("\x3c!--");s=(r>-1||s)&&-1===e.indexOf("--\x3e",r+1);const i=_n.exec(e);t+=null===i?e+(s?jn:fn):e.substr(0,i.index)+i[1]+i[2]+mn+i[3]+pn}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");let t=this.getHTML();return void 0!==On&&(t=On.createHTML(t)),e.innerHTML=t,e}}const An=e=>null===e||!("object"==typeof e||"function"==typeof e),Sn=e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]);class kn{constructor(e,t,s){this.dirty=!0,this.element=e,this.name=t,this.strings=s,this.parts=[];for(let e=0;e<s.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new Nn(this)}_getValue(){const e=this.strings,t=e.length-1,s=this.parts;if(1===t&&""===e[0]&&""===e[1]){const e=s[0].value;if("symbol"==typeof e)return String(e);if("string"==typeof e||!Sn(e))return e}let n="";for(let r=0;r<t;r++){n+=e[r];const t=s[r];if(void 0!==t){const e=t.value;if(An(e)||!Sn(e))n+="string"==typeof e?e:String(e);else for(const t of e)n+="string"==typeof t?t:String(t)}}return n+=e[t],n}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class Nn{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===hn||An(e)&&e===this.value||(this.value=e,an(e)||(this.committer.dirty=!0))}commit(){for(;an(this.value);){const e=this.value;this.value=hn,e(this)}this.value!==hn&&this.committer.commit()}}class Cn{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(yn()),this.endNode=e.appendChild(yn())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=yn()),e.__insert(this.endNode=yn())}insertAfterPart(e){e.__insert(this.startNode=yn()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(null===this.startNode.parentNode)return;for(;an(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=hn,e(this)}const e=this.__pendingValue;e!==hn&&(An(e)?e!==this.value&&this.__commitText(e):e instanceof En?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):Sn(e)?this.__commitIterable(e):e===dn?(this.value=dn,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling,s="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=s:this.__commitNode(document.createTextNode(s)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof xn&&this.value.template===t)this.value.update(e.values);else{const s=new xn(t,e.processor,this.options),n=s._clone();s.update(e.values),this.__commitNode(n),this.value=s}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let s,n=0;for(const r of e)s=t[n],void 0===s&&(s=new Cn(this.options),t.push(s),0===n?s.appendIntoPart(this):s.insertAfterPart(t[n-1])),s.setValue(r),s.commit(),n++;n<t.length&&(t.length=n,this.clear(s&&s.endNode))}clear(e=this.startNode){un(this.startNode.parentNode,e.nextSibling,this.endNode)}}class Mn{constructor(e,t,s){if(this.value=void 0,this.__pendingValue=void 0,2!==s.length||""!==s[0]||""!==s[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=s}setValue(e){this.__pendingValue=e}commit(){for(;an(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=hn,e(this)}if(this.__pendingValue===hn)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=hn}}class Tn extends kn{constructor(e,t,s){super(e,t,s),this.single=2===s.length&&""===s[0]&&""===s[1]}_createPart(){return new Vn(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class Vn extends Nn{}let Ln=!1;(()=>{try{const e={get capture(){return Ln=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}})();class Rn{constructor(e,t,s){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=s,this.__boundHandleEvent=e=>this.handleEvent(e)}setValue(e){this.__pendingValue=e}commit(){for(;an(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=hn,e(this)}if(this.__pendingValue===hn)return;const e=this.__pendingValue,t=this.value,s=null==e||null!=t&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive),n=null!=e&&(null==t||s);s&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),n&&(this.__options=Fn(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=hn}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const Fn=e=>e&&(Ln?{capture:e.capture,passive:e.passive,once:e.once}:e.capture);const Pn=new class{handleAttributeExpressions(e,t,s,n){const r=t[0];if("."===r){return new Tn(e,t.slice(1),s).parts}if("@"===r)return[new Rn(e,t.slice(1),n.eventContext)];if("?"===r)return[new Mn(e,t.slice(1),s)];return new kn(e,t,s).parts}handleTextExpression(e){return new Cn(e)}};function zn(e){let t=Dn.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},Dn.set(e.type,t));let s=t.stringsArray.get(e.strings);if(void 0!==s)return s;const n=e.strings.join(pn);return s=t.keyString.get(n),void 0===s&&(s=new bn(e,e.getTemplateElement()),t.keyString.set(n,s)),t.stringsArray.set(e.strings,s),s}const Dn=new Map,Hn=new WeakMap;"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");const Wn=new WeakMap,In=on(e=>t=>{if(!(t instanceof Cn))throw new Error("cache can only be used in text bindings");let s=Wn.get(t);void 0===s&&(s=new WeakMap,Wn.set(t,s));const n=t.value;if(n instanceof xn){if(e instanceof En&&n.template===t.options.templateFactory(e))return void t.setValue(e);{let e=s.get(n.template);void 0===e&&(e={instance:n,nodes:document.createDocumentFragment()},s.set(n.template,e)),ln(e.nodes,t.startNode.nextSibling,t.endNode)}}if(e instanceof En){const n=t.options.templateFactory(e),r=s.get(n);void 0!==r&&(t.setValue(r.nodes),t.commit(),t.value=r.instance)}t.setValue(e)});class Bn{constructor(e){this.classes=new Set,this.changed=!1,this.element=e;const t=(e.getAttribute("class")||"").split(/\s+/);for(const e of t)this.classes.add(e)}add(e){this.classes.add(e),this.changed=!0}remove(e){this.classes.delete(e),this.changed=!0}commit(){if(this.changed){let e="";this.classes.forEach(t=>e+=t+" "),this.element.setAttribute("class",e)}}}const qn=new WeakMap,Un=on(e=>t=>{if(!(t instanceof Nn)||t instanceof Vn||"class"!==t.committer.name||t.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");const{committer:s}=t,{element:n}=s;let r=qn.get(t);void 0===r&&(n.setAttribute("class",s.strings.join(" ")),qn.set(t,r=new Set));const i=n.classList||new Bn(n);r.forEach(t=>{t in e||(i.remove(t),r.delete(t))});for(const t in e){const s=e[t];s!=r.has(t)&&(s?(i.add(t),r.add(t)):(i.remove(t),r.delete(t)))}"function"==typeof i.commit&&i.commit()}),$n=new WeakMap,Qn=on(e=>t=>{const s=$n.get(t);if(void 0===e&&t instanceof Nn){if(void 0!==s||!$n.has(t)){const e=t.committer.name;t.committer.element.removeAttribute(e)}}else e!==s&&t.setValue(e);$n.set(t,e)}),Gn=new WeakMap,Zn=on((e,t)=>s=>{const n=Gn.get(s);if(Array.isArray(e)){if(Array.isArray(n)&&n.length===e.length&&e.every((e,t)=>e===n[t]))return}else if(n===e&&(void 0!==e||Gn.has(s)))return;s.setValue(t()),Gn.set(s,Array.isArray(e)?Array.from(e):e)}),Jn=(e,t)=>{const s=e.startNode.parentNode,n=void 0===t?e.endNode:t.startNode,r=s.insertBefore(yn(),n);s.insertBefore(yn(),n);const i=new Cn(e.options);return i.insertAfterNode(r),i},Yn=(e,t)=>(e.setValue(t),e.commit(),e),Kn=(e,t,s)=>{const n=e.startNode.parentNode,r=s?s.startNode:e.endNode,i=t.endNode.nextSibling;i!==r&&ln(n,t.startNode,i,r)},Xn=e=>{un(e.startNode.parentNode,e.startNode,e.endNode.nextSibling)},er=(e,t,s)=>{const n=new Map;for(let r=t;r<=s;r++)n.set(e[r],r);return n},tr=new WeakMap,sr=new WeakMap,nr=on((e,t,s)=>{let n;return void 0===s?s=t:void 0!==t&&(n=t),t=>{if(!(t instanceof Cn))throw new Error("repeat can only be used in text bindings");const r=tr.get(t)||[],i=sr.get(t)||[],o=[],a=[],c=[];let l,u,h=0;for(const t of e)c[h]=n?n(t,h):h,a[h]=s(t,h),h++;let d=0,p=r.length-1,f=0,v=a.length-1;for(;d<=p&&f<=v;)if(null===r[d])d++;else if(null===r[p])p--;else if(i[d]===c[f])o[f]=Yn(r[d],a[f]),d++,f++;else if(i[p]===c[v])o[v]=Yn(r[p],a[v]),p--,v--;else if(i[d]===c[v])o[v]=Yn(r[d],a[v]),Kn(t,r[d],o[v+1]),d++,v--;else if(i[p]===c[f])o[f]=Yn(r[p],a[f]),Kn(t,r[p],r[d]),p--,f++;else if(void 0===l&&(l=er(c,f,v),u=er(i,d,p)),l.has(i[d]))if(l.has(i[p])){const e=u.get(c[f]),s=void 0!==e?r[e]:null;if(null===s){const e=Jn(t,r[d]);Yn(e,a[f]),o[f]=e}else o[f]=Yn(s,a[f]),Kn(t,s,r[d]),r[e]=null;f++}else Xn(r[p]),p--;else Xn(r[d]),d++;for(;f<=v;){const e=Jn(t,o[v+1]);Yn(e,a[f]),o[f++]=e}for(;d<=p;){const e=r[d++];null!==e&&Xn(e)}tr.set(t,o),sr.set(t,c)}}),rr=new WeakMap,ir=on(e=>t=>{if(!(t instanceof Nn)||t instanceof Vn||"style"!==t.committer.name||t.committer.parts.length>1)throw new Error("The `styleMap` directive must be used in the style attribute and must be the only part in the attribute.");const{committer:s}=t,{style:n}=s.element;let r=rr.get(t);void 0===r&&(n.cssText=s.strings.join(" "),rr.set(t,r=new Set)),r.forEach(t=>{t in e||(r.delete(t),-1===t.indexOf("-")?n[t]=null:n.removeProperty(t))});for(const t in e)r.add(t),-1===t.indexOf("-")?n[t]=e[t]:n.setProperty(t,e[t])}),or=new WeakMap,ar=on(e=>t=>{if(!(t instanceof Cn))throw new Error("templateContent can only be used in text bindings");const s=or.get(t);if(void 0!==s&&e===s.template&&t.value===s.fragment)return;const n=document.importNode(e.content,!0);t.setValue(n),or.set(t,{template:e,fragment:n})}),cr=new WeakMap,lr=on(e=>t=>{if(!(t instanceof Cn))throw new Error("unsafeHTML can only be used in text bindings");const s=cr.get(t);if(void 0!==s&&An(e)&&e===s.value&&t.value===s.fragment)return;const n=document.createElement("template");n.innerHTML=e;const r=document.importNode(n.content,!0);t.setValue(r),cr.set(t,{value:e,fragment:r})}),ur=new WeakMap,hr=window.navigator.userAgent.indexOf("Trident/")>0,dr=(on(e=>t=>{if(!(t instanceof Cn))throw new Error("unsafeSVG can only be used in text bindings");const s=ur.get(t);if(void 0!==s&&An(e)&&e===s.value&&t.value===s.fragment)return;const n=document.createElement("template"),r=n.content;let i;hr?(n.innerHTML=`<svg>${e}</svg>`,i=r.firstChild):(i=document.createElementNS("http://www.w3.org/2000/svg","svg"),r.appendChild(i),i.innerHTML=e),r.removeChild(i),ln(r,i.firstChild);const o=document.importNode(r,!0);t.setValue(o),ur.set(t,{value:e,fragment:o})}),new WeakMap),pr=2147483647,fr={html:(e,...t)=>new En(e,t,"html",Pn),render:(e,t,s)=>{let n=Hn.get(t);void 0===n&&(un(t,t.firstChild),Hn.set(t,n=new Cn(Object.assign({templateFactory:zn},s))),n.appendInto(t)),n.setValue(e),n.commit()},cache:In,classMap:Un,ifDefined:Qn,guard:Zn,repeat:nr,styleMap:ir,templateContent:ar,unsafeHTML:lr,until:on((...e)=>t=>{let s=dr.get(t);void 0===s&&(s={lastRenderedIndex:pr,values:[]},dr.set(t,s));const n=s.values;let r=n.length;s.values=e;for(let i=0;i<e.length&&!(i>s.lastRenderedIndex);i++){const o=e[i];if(An(o)||"function"!=typeof o.then){t.setValue(o),s.lastRenderedIndex=i;break}i<r&&o===n[i]||(s.lastRenderedIndex=pr,r=0,Promise.resolve(o).then(e=>{const n=s.values.indexOf(o);n>-1&&n<s.lastRenderedIndex&&(s.lastRenderedIndex=n,t.setValue(e),t.commit())}))}})},vr=new WeakMap,mr=e=>!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length),br=(e,t,s)=>{const n=vr.get(e)||{};s?n[t]=s:delete n[t],vr.set(e,n)},gr=(e,t)=>(vr.get(e)||{})[t],wr=function(e,t,s,n,r,i,o){"function"==typeof n&&(o=i,i=r,r=n,n=null);const a="on:"+e+"-"+s+"-"+n;if(gr(t,a))return void console.error("Error: Sargasso utils.on: duplicate event handler specification. %o %s",t,a);const c={uid:e,events:s,selector:n,fn:i=>{o&&yr(e,t,s,n),n?Array.from(t.querySelectorAll(n)).forEach(e=>{(i.target===e||e.contains(i.target))&&r(i,e)}):r(i)},options:i||!1};br(t,a,c),s.split(/[\s,]+/).forEach(e=>{t.addEventListener(e.trim(),c.fn,c.options)})},yr=function(e,t,s,n){const r="on:"+e+"-"+s+"-"+n,i=gr(t,r);i&&(s.split(/[\s,]+/).forEach(e=>{t.removeEventListener(e.trim(),i.fn,i.options)}),br(t,r))},_r={hasClass:(e,t)=>-1!==(e.className||"").split(/\s+/).indexOf(t),addClass:(e,t)=>{const s=(e.className||"").split(/\s+/);Array.isArray(t)||(t=t.split(/[\s,]/)),t.forEach(e=>{e=e.trim(),-1===s.indexOf(e)&&s.push(e)}),e.className=s.join(" ")},removeClass:(e,t)=>{const s=(e.className||"").split(/\s+/);Array.isArray(t)||(t=t.split(/[\s,]/)),t.forEach(e=>{e=e.trim(),-1!==s.indexOf(e)&&s.splice(s.indexOf(e),1)}),e.className=s.join(" ")},isVisible:mr,inViewPort:(e,t=window)=>{const s=e.getBoundingClientRect(),n=mr(e),r=s.bottom<0;let i;return i=t.self===window?s.top>(window.innerHeight||document.documentElement.clientHeight):s.top>t.clientHeight,n&&!i&&!r},setCSS:(e,t)=>{for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)){const n=je(s);e.style[n]=t[s]}},setMetaData:br,getMetaData:gr,on:wr,off:yr,once:function(e,t,s,n,r,i){wr(e,t,s,n,r,i,!0)},offAll:function(e){const t=vr.get(e)||{},s=[];for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&e.match(/^on:/)&&s.push(e);s.forEach(s=>{yr(t[s].uid,e,t[s].events,t[s].selector)})}},xr={}.constructor;class Or{constructor(e,t={},s={}){this.id=e,this.bound={},this.data=new Proxy(t,(e=>({set(t,s,n){let r=e.getSource();return null!=n&&n.constructor===xr&&n._is_observable_payload&&(r=n.source,n=n.value),Reflect.set(t,s,n),e.sync(s,r),!0}}))(this)),this.options=s}destroy(){delete this.data,Object.keys(this.bound).forEach(e=>{Object.keys(this.bound[e]).forEach(t=>{this.unbind(e,t)})})}getBoundData(){return this.data}set(e,t,s){sn(this.get(e),t)||(this.data[e]={_is_observable_payload:!0,source:s||this.getSource(),value:t})}get(e){return this.data[e]}delete(e){delete this.data[e]}getSource(){return this.constructor.name+":"+this.guid}syncAll(){Object.keys(this.data||{}).forEach(e=>{this.sync(e)})}bind(e,t,s="*"){this.bound[s]||(this.bound[s]={}),this.bound[s][e]=t,Object.keys(this.data).forEach(e=>{t(this.id,e,this.get(e))})}unbind(e,t="*"){this.bound[t][e]&&delete this.bound[t][e]}observers(){let e=0;for(const t in this.bound)this.bound.hasOwnProperty(t)&&e++;return e}sync(e,t){Object.keys(this.bound["*"]||{}).forEach(s=>{this.bound["*"][s](this.id,e,this.get(e),t)}),Object.keys(this.bound[e]||{}).forEach(s=>{this.bound[e][s](this.id,e,this.get(e),t)})}}let jr,Er,Ar,Sr,kr,Nr;class Cr{constructor(e){this.options=e,this.observers=[],this.pendingAnimationFrame=void 0,this.frameQueue=[]}subscribe(e){this.observers.length||this.wakeup(),this.observers.push(e)}unSubscribe(e){-1!==this.observers.indexOf(e)&&this.observers.splice(this.observers.indexOf(e),1),this.observers.length||this.sleep()}sleep(){}wakeup(){}notifyObservers(e,t){for(let s=0;s<this.observers.length;s++)this.observers[s][e]&&this.observers[s][e].apply(this.observers[s],t||[])}flushQueue(){this.pendingAnimationFrame&&(cancelAnimationFrame(this.pendingAnimationFrame),this.pendingAnimationFrame=void 0),this.frameQueue=[]}queueFrame(e){this.frameQueue.push(e.bind(this)),this.pendingAnimationFrame||(this.pendingAnimationFrame=requestAnimationFrame(()=>{this.processQueue()}))}processQueue(){this.pendingAnimationFrame=void 0;const e=this.frameQueue.slice(0);this.frameQueue=[];for(let t=0;t<e.length;t++)e[t]()}}jr=new class extends Cr{constructor(e){super(e),this.mutationHandler=ze((e,t)=>{this.observeDOM(e,t)},100,{maxWait:250}),this.mutationObserver=new MutationObserver(this.mutationHandler,!1)}subscribe(e){super.subscribe(e),e.watchDOM()}wakeup(){super.wakeup(),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0})}sleep(){super.sleep(),this.mutationObserver.disconnect()}observeDOM(){this.notifyObservers("watchDOM")}},Er=new class extends Cr{constructor(e={}){super(e),this.scrollElement=this.options.scrollElement||window,this.lastscroll=0,this.scrolling=!1}trigger(){this.scrolling||this.scrollLoop()}scrollLoop(){if(this.lastscroll!==this.scrollTop()){this.scrolling=!0,this.lastscroll=this.scrollTop(),this.watchScroll();const e=()=>{this.scrollLoop()};this.queueFrame(e)}else this.scrolling=!1}setOptions(e={}){this.sleep(),this.scrollElement=e.scrollElement||window,this.wakeup()}subscribe(e){super.subscribe(e),e.watchScroll()}wakeup(){super.wakeup(),_r.on("theScrollWatcher",this.scrollElement,"scroll",()=>{this.trigger()})}sleep(){super.sleep(),_r.off("theScrollWatcher",this.scrollElement,"scroll")}inViewPort(e){return _r.inViewPort(e,this.scrollElement)}watchScroll(){this.notifyObservers("watchScroll")}scrollTop(e){if(this.scrollElement===window){if(void 0===e)return window.pageYOffset;window.scrollTo(0,e)}else{if(void 0===e)return this.scrollElement.scrollTop;this.scrollElement.scrollTop=e}}},Ar=new class extends Cr{constructor(e){super(e),this.debounce=ze(()=>{this.watchResize()},250)}subscribe(e){super.subscribe(e),e.watchResize()}wakeup(){super.wakeup(),window.addEventListener("resize",this.debounce,!1)}sleep(){super.sleep(),window.removeEventListener("resize",this.debounce)}watchResize(){this.notifyObservers("watchResize")}},Sr=new class extends Cr{constructor(e){super(e),"onorientationchange"in window?_r.addClass(document.body,"have-orientation"):_r.addClass(document.body,"no-orientation"),this.debounce=ze(()=>{this.watchOrientation()},250)}subscribe(e){super.subscribe(e),e.watchOrientation()}wakeup(){super.wakeup(),"onorientationchange"in window&&window.addEventListener("orientationchange",this.debounce,!1)}sleep(){super.sleep(),"onorientationchange"in window&&window.removeEventListener("orientationchange",this.debounce)}watchOrientation(){this.notifyObservers("watchOrientation")}},kr=new class extends Cr{constructor(e){super(e),this.workers={}}registerWorker(e,t){if(!this.workers[e]){let s=t,n=!1;if(!t.match(/^(http|\/)/i)){const e=new Blob([t],{type:"text/javascript"});s=URL.createObjectURL(e),n=!0}this.workers[e]={worker:new Worker(s),observers:[]},n&&URL.revokeObjectURL(s),this.workers[e].worker.onmessage=t=>{this.workerMessage(e,t)}}return this.workers[e].worker}subscribe(e,t){if(!this.workers[t])throw new Error("worker "+t+" does not exist");this.workers[t].observers.push(e),super.subscribe(e)}unSubscribe(e,t){if(!this.workers[t])throw new Error("worker "+t+" does not exist");const s=this.workers[t].observers;-1!==s.indexOf(e)&&s.splice(s.indexOf(e),1),s.length||(this.workers[t].worker.terminate(),delete this.workers[t]),super.unSubscribe(e)}workerMessage(e,t){this.workers[e].observers.forEach(s=>{this.workerObservers[s].workerMessage&&this.observers[s].workerMessage.apply(this.observers[s],[e,t])})}wakeup(){super.wakeup()}sleep(){super.sleep()}},Nr=new class extends Cr{constructor(e){super(e),this.registeredObservableObjects={}}getObservable(e){return this.registeredObservableObjects[e]?this.registeredObservableObjects[e].observable:void 0}observableStart(e,t){return this.registeredObservableObjects[e]||(t&&t.constructor&&"ObservableObject"===t.constructor.name?this.registeredObservableObjects[e]={id:e,observable:t,observers:[],managed:!1}:this.registeredObservableObjects[e]={id:e,observable:new Or(e,t),observers:[],managed:!0},this.registeredObservableObjects[e].observable.bind(this.constructor.name,this.notify.bind(this))),this.registeredObservableObjects[e].observable}observableDestroy(e){if(!this.registeredObservableObjects[e])throw new Error("ObservableObject observableDestroy "+e+" does not exist");this.registeredObservableObjects[e].observable.unbind(this.constructor.name),this.registeredObservableObjects[e].observable.destroy(),delete this.registeredObservableObjects[e]}subscribe(e,t,s){this.registeredObservableObjects[t]||this.observableStart(t,s),this.registeredObservableObjects[t].observers.push(e),super.subscribe(e)}unSubscribe(e,t){if(!this.registeredObservableObjects[t])throw new Error("ObservableObject unSubscribe "+t+" does not exist");const s=this.registeredObservableObjects[t].observers;-1!==s.indexOf(e)&&s.splice(s.indexOf(e),1),!s.length&&this.registeredObservableObjects[t].managed&&this.observableDestroy(t),super.unSubscribe(e)}notify(e,t,s,n){if(!this.registeredObservableObjects[e])throw new Error("ObservableObject notify "+e+" does not exist");this.registeredObservableObjects[e].observers.forEach(r=>{r.observableChanged&&r.observableChanged.apply(r,[e,t,s,n])})}};let Mr=0;const Tr=[],Vr="customElements"in window,Lr={},Rr=(e,t)=>{if(Lr[e]=t,Vr){const t=`\n\t\t\treturn class ${e}Element extends HTMLElement {\n\t\t\t\tconstructor(element, options = {}) {\n\t\t\t\t\tsuper()\n\t\t\t\t\tthis.helperClass= '${e}'\n\t\t\t\t\tthis.helper = null\n\t\t\t\t}\n\n\t\t\t\tconnectedCallback () {\n\t\t\t\t\tthis.helper = new registeredClasses[this.helperClass](this,{isCustomElement:true})\n\t\t\t\t\tthis.helper.start()\n\t\t\t\t}\n\n\t\t\t\tdisconnectedCallback () {\n\t\t\t\t\tthis.helper.destroy()\n\t\t\t\t\tthis.helper = null // nuke the reference for trash collection\n\t\t\t\t}\n\t\t\t}`;customElements.define("sargasso-"+De(e),new Function("registeredClasses",t)(Lr))}},Fr=["DOMChanged","didScroll","didResize","didBreakpoint","enterViewport","exitViewport","enterFullscreen","exitFullscreen","newPage","elementEvent"];class Pr{constructor(e,t={}){this.uid=++Mr,this.element=e,this.options=t,this.pendingAnimationFrame=void 0,this.frameQueue=[],this.isInViewport=!1,this.workers={},this.observables={},this.template=void 0,this.templateArgs={},this.started=!1}start(){const e=this.getMetaData("registeredResponsiveControllers")||[];e.push(this),this.setMetaData("registeredResponsiveControllers",e),this.setMetaData(this.constructor.name,this),Tr.push(this),this.options.watchDOM&&jr.subscribe(this),(this.options.watchScroll||this.options.watchViewport)&&Er.subscribe(this),(this.options.watchResize||this.options.watchViewport)&&Ar.subscribe(this),(this.options.watchOrientation||this.options.watchViewport)&&Sr.subscribe(this),this.elementListener=e=>{e.detail&&e.detail.sargassoEvent&&-1!==Fr.indexOf(e.detail.sargassoEvent)?this[e.detail.sargassoEvent].apply(this,e.detail.sargassoEventOptions||[]):this.elementEvent(e)},this.element.addEventListener("sargasso",this.elementListener),this.started=!0}sleep(){this.options.watchDOM&&jr.unSubscribe(this),(this.options.watchScroll||this.options.watchViewport)&&Er.unSubscribe(this),(this.options.watchResize||this.options.watchViewport)&&Ar.unSubscribe(this),(this.options.watchOrientation||this.options.watchViewport)&&Sr.unSubscribe(this),this.element.removeEventListener("sargasso",this.elementListener),_r.offAll(this.element),this.started=!1}DOMChanged(){}didScroll(){}didResize(){}didBreakpoint(){}enterViewport(){}exitViewport(){}enterFullscreen(){}exitFullscreen(){}newPage(e,t){}elementEvent(e){}workerOnMessage(e,t){}observableChanged(e,t,s,n){}setMetaData(e,t){_r.setMetaData(this.element,e,t)}getMetaData(e){return _r.getMetaData(this.element,e)}on(e,t,s,n){_r.on(this.constructor.name+"-"+this.uid,this.element,e,t,s,n)}off(e,t){_r.off(this.constructor.name+"-"+this.uid,this.element,e,t)}once(e,t,s,n){_r.once(this.constructor.name+"-"+this.uid,this.element,e,t,s,n)}notifyAll(e,t){if(-1===Fr.indexOf(e))throw new Error("invalid event name "+e);for(let s=0;s<Tr.length;s++){const n=Tr[s];n!==this&&n[e]&&n[e].apply(n,t)}}notifyElement(e,t,s){if(-1===Fr.indexOf(t))throw new Error("invalid event name "+t);const n=this.getMetaData("registeredResponsiveControllers");if(n)for(let e=0;e<n.length;e++){const r=n[e];r!==this&&r[t]&&r[t].apply(r,s)}}queueFrame(e){this.frameQueue.push(e.bind(this)),this.pendingAnimationFrame||(this.pendingAnimationFrame=requestAnimationFrame(()=>{this.processQueue()}))}wantFullscreen(e){e?this.enterFullscreen():this.exitFullscreen()}hasClass(e){return _r.hasClass(this.element,e)}addClass(e){_r.addClass(this.element,e)}removeClass(e){_r.removeClass(this.element,e)}setCSS(e){_r.setCSS(this.element,e)}isVisible(){return _r.isVisible(this.element)}workerStart(e,t){return this.workers[e]=kr.registerWorker(e,t),kr.subscribe(this,e),this.workers[e]}workerPostMessage(e,t){t.uid||(t.uid=this.uid),this.workers[e]&&this.workers[e].postMessage(t)}getObservable(e){return this.observables[e]}observableStart(e,t,s){this.observables[e]=Nr.subscribe(this,e,t)}observableStop(e){this.observables[e]&&(Nr.unSubscribe(this,e),delete this.observables[e])}observableStopAll(){for(const e in this.observables)this.observableStop(e)}setTemplate(e){this.template=e}setTemplateArgs(e){this.templateArgs=e,this.render()}render(){this.template&&fr.render(this.template(JSON.parse(JSON.stringify(this.templateArgs||{}))),this.element)}flushQueue(){this.pendingAnimationFrame&&(cancelAnimationFrame(this.pendingAnimationFrame),this.pendingAnimationFrame=void 0),this.frameQueue=[]}processQueue(){this.pendingAnimationFrame=void 0;const e=this.frameQueue.slice(0);this.frameQueue=[];for(let t=0;t<e.length;t++)e[t]()}stopWorker(e){this.workers[e]&&(kr.unSubscribe(this,e),delete this.workers[e])}stopAllWorkers(){for(const e in this.workers)this.stopWorker(e)}destroy(){this.stopAllWorkers(),this.observableStopAll(),this.flushQueue(),this.started&&this.sleep();const e=this.getMetaData("registeredResponsiveControllers");e&&-1!==e.indexOf(this)&&(e.splice(e.indexOf(this),1),this.setMetaData("registeredResponsiveControllers",e)),this.setMetaData(this.constructor.name,null),this.element=null,-1!==Tr.indexOf(this)&&Tr.splice(Tr.indexOf(this),1)}watchDOM(){this.DOMChanged()}watchScroll(){this.options.watchViewport&&this.inViewport(),this.didScroll()}watchResize(){this.options.watchViewport&&this.inViewport(),this.didResize()}watchOrientation(){!window.orientation||90!==window.orientation&&-90!==window.orientation?this.wantFullscreen(!1):this.wantFullscreen(!0)}inViewport(){Er.inViewPort(this.element)?this.isInViewport||(this.enterViewport(),this.isInViewport=!0):this.isInViewport&&(this.exitViewport(),this.isInViewport=!1)}workerMessage(e,t){t.data.uid===this.uid&&this.workerOnMessage(e,t.data)}nativeRequestFullScreen(){if(document.fullscreenElement){if(document.fullscreenElement===this.element)return;document.exitFullscreen()}this.element.requestFullscreen()}nativeExitFullScreen(){document.fullscreenElement&&document.fullscreenElement===this.element&&document.exitFullscreen()}}Rr("Sargasso",Pr);class zr extends Pr{constructor(e,t={}){t.watchScroll=!0,t.watchResize=!0,t.watchDOM=!0,t.immortal=!0,super(e,t)}didResize(){super.didResize(),this.lazyHandler()}didScroll(){super.didScroll(),this.lazyHandler()}DOMChanged(){super.DOMChanged(),this.lazyHandler()}lazyHandler(){const e=document.querySelectorAll("[data-lazy-sargasso-class]");for(let t=0;t<e.length;t++){const s=e[t];if(Er.inViewPort(s)){const n=s.getAttribute("data-lazy-sargasso-class").split(/\s*,\s*/);for(let s=0;s<n.length;s++){new Lr[n[s]](e[t]).start()}s.removeAttribute("data-lazy-sargasso-class")}}}}Rr("LazyInstantiate",zr);class Dr extends Pr{constructor(e,t={}){super(e,{watchDOM:!0,mortal:!1}),this.lazy=new zr(e,t)}start(){this.lazy.start(),super.start()}instantiate(e){const t=e.getAttribute("data-sargasso-class").split(/\s*,\s*/);for(let s=0;s<t.length;s++)try{new Lr[t[s]](e).start()}catch(e){console.log("error instantiating "+t[s],e,Lr)}e.removeAttribute("data-sargasso-class")}newPage(){this.doIt()}DOMChanged(){this.doIt()}doIt(){const e=document.querySelectorAll("[data-sargasso-class]");for(const t of e)this.instantiate(t);const t=[];for(let e=0;e<Tr.length;e++)Tr[e].options.immortal||Tr[e].options.isCustomElement||document.body.contains(Tr[e].element)||t.push(Tr[e]);for(let e=0;e<t.length;e++)t[e].destroy()}}Rr("SargassoSupervisor",Dr);const Hr=[{className:"screen-xs",maxWidth:599},{className:"screen-sm",maxWidth:1023},{className:"screen-md",maxWidth:1439},{className:"screen-lg",maxWidth:1999},{className:"screen-xl",maxWidth:void 0}];class Wr extends Pr{constructor(e,t={}){t.watchResize=!0,super(e,t),t.widths?this.options.widths=t.widths:this.options.widths=Hr,this.scale=void 0,this.disabled=!1,this.forceScale=void 0,this.orientation=void 0,this.widths=[],this.classes=[]}start(){super.start();let e=".show-hide{display:none;}\n";this.widths.push(0);for(let t=0;t<this.options.widths.length;t++)this.options.widths[t].maxWidth&&this.widths.push(this.options.widths[t].maxWidth),this.classes.push(this.options.widths[t].className),e+="."+this.options.widths[t].className+" .hidden-"+this.options.widths[t].className+"{display:none;}\n",e+=".not-"+this.options.widths[t].className+" .hidden-not-"+this.options.widths[t].className+"{display:none;}\n",e+="."+this.options.widths[t].className+" .shown-"+this.options.widths[t].className+"{display:block;}\n",e+=".not-"+this.options.widths[t].className+" .shown-not-"+this.options.widths[t].className+"{display:block;}\n";const t=document.createElement("style");t.type="text/css",t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t),this.detectGeometry()}didResize(){super.didResize(),this.detectGeometry()}disableResponsive(e){_r.addClass(document.body,"disable-responsive"),this.disabled=!0,this.forceScale=e,this.detectGeometry()}enableResponsive(){_r.removeClass(document.body,"disable-responsive"),this.disabled=!1,this.forceScale="",this.detectGeometry()}detectGeometry(){let e=this.classes[this.widths.length-1];if(this.disabled)e=this.forceScale;else{const t=window.innerWidth;if(window.innerHeight>t){if("portrait"!==this.orientation){const e=()=>{_r.removeClass(document.body,"landscape"),_r.addClass(document.body,"portrait")};this.queueFrame(e),this.orientation="portrait"}}else if("landscape"!==this.orientation){const e=()=>{_r.removeClass(document.body,"portrait"),_r.addClass(document.body,"landscape")};this.queueFrame(e),this.orientation="landscape"}for(let s=0;s<this.widths.length-1;s++)if(t>=this.widths[s]&&t<this.widths[s+1]){e=this.classes[s];break}}let t=0;if(e!==this.scale){++t;const s=()=>{for(let t=0;t<this.classes.length;t++)this.classes[t]!==e?(_r.addClass(document.body,"not-"+this.classes[t]),_r.removeClass(document.body,this.classes[t]),_r.removeClass(document.body,"shown-"+this.classes[t]),_r.removeClass(document.body,"hidden-"+this.classes[t])):_r.removeClass(document.body,"not-"+this.classes[t]);_r.addClass(document.body,e),_r.addClass(document.body,"shown-"+e),_r.addClass(document.body,"hidden-"+e),this.notifyAll("didBreakpoint",[e])};this.queueFrame(s)}this.scale=e,t&&this.setHints()}setHints(){let e="";this.scale&&(e&&(e+=" "),e+=this.scale),e!==this.getCookie("responsive")&&this.setCookie("responsive",e)}getCookie(e){return nn.get(e)}setCookie(e,t,s){const n={path:"/",domain:this.options.cookieDomain||null,expires:s};nn.set(e,t,n)}deleteCookie(e){this.setCookie(e,null)}}Rr("Breakpoints",Wr);class Ir extends Pr{constructor(e,t={}){t.watchDOM=!0,t.immortal=!0,super(e,t),this.excludeRegex=new RegExp("^(//|http|javascript|mailto|#)","i"),this.currentPage=location.pathname+location.search,this.cachedMarkup={}}start(){const e=document.querySelectorAll("[data-hijax-skip-unchanged]");for(let t=0;t<e.length;t++){const s=e[t],n=s.getAttribute("id");this.cachedMarkup[n]=s.innerHTML}super.start(),window.addEventListener("popstate",e=>{this.watchPopState(e)},!1)}DOMChanged(){super.DOMChanged(),this.hijaxLinks()}watchPopState(e){location.pathname+location.search!==this.currentPage&&this.preFlight(location.pathname+location.search)}hijaxLinks(e){const t=e?e.getElementsByTagName("a"):this.element.getElementsByTagName("a");for(let e=0;e<t.length;e++){const s=t[e],n=s.getAttribute("href");!n||s.getAttribute("data-hijaxed")||s.getAttribute("target")||s.hasAttribute("data-no-hijax")||this.excludeRegex.exec(n)||(s.setAttribute("data-hijaxed",!0),s.addEventListener("click",e=>{e.preventDefault(),this.setPage(n)},!1))}}setPage(e,t){e===this.currentPage||t?this.preFlight(e):(history.pushState(null,null,e),this.watchPopState())}preFlight(e){if(!this.options.preFlight)return this.loadPage(e);this.options.preFlight(e,(t,s,n)=>{t&&(this.options.onError?this.options.onError("danger",t):alert("Error loading page: "+t)),s?this.currentPage=location.pathname+location.search:this.loadPage(n||e)})}loadPage(e){this.queueFrame(()=>{_r.addClass(document.body,"hijax-loading")}),this.options.onExitPage&&this.options.onExitPage();const t=new XMLHttpRequest;t.open("GET",e),t.setRequestHeader("Sargasso-Hijax",1),t.setRequestHeader("x-digitopia-hijax",1),this.options.onLoading&&(this.options.onLoading(),t.onreadystatechange=this.options.onLoading),t.onload=()=>{if(301===t.status||302===t.status||t.getResponseHeader("Sargasso-Location")){const e=t.getResponseHeader("Location")?t.getResponseHeader("Location"):t.getResponseHeader("Sargasso-Location");this.setPage(e)}else if(200===t.status){Er.scrollTop(0),this.mergePage(t.responseText);const e=this.currentPage,s=()=>{this.notifyAll("newPage",[e,location.pathname+location.search]),_r.removeClass(document.body,"hijax-loading")};this.queueFrame(s),this.currentPage=location.pathname+location.search}else{const e=t.getResponseHeader("Sargasso-Flash-Level")||"danger";let s=t.getResponseHeader("Sargasso-Flash-Message")||t.statusText;s||(s="Could not connect to server."),this.options.onError?this.options.onError(e,s):alert("Error loading page: "+s)}},t.send()}processScripts(e){Array.from(e).forEach(e=>{e.remove();const t=e.getAttribute("id");document.getElementById(t)||document.getElementsByTagName("head")[0].appendChild(e)})}mergePage(e){const t=document.querySelectorAll("[data-ephemeral]");Array.from(t).forEach(e=>{e.remove()});const s=e.split(/(<body[^>]*>|<\/body>)/gi),n=Br(s[2]),r=document.querySelectorAll("[data-hijax]");for(let e=0;e<r.length;e++){const t=r[e],s=t.getAttribute("id"),i=n.getElementById(s);if(t.hasAttribute("data-hijax-skip-unchanged")){if(this.cachedMarkup[s]===i.innerHTML)continue;this.cachedMarkup[s]=i.innerHTML}const o=t.getAttribute("data-hijax-cache-key-selector");if(o&&i.querySelector(o)&&t.querySelector(o)&&t.querySelector(o).getAttribute("data-hijax-cache-key")===i.querySelector(o).getAttribute("data-hijax-cache-key"))continue;this.processScripts(i.querySelectorAll("script"));const a=()=>{t.parentNode.replaceChild(i,t),this.options.onEnterPage&&this.options.onEnterPage(),this.hijaxLinks(i)};this.queueFrame(a)}}}Rr("HijaxLoader",Ir);const Br=e=>{if(document.createRange&&document.createRange().createContextualFragment)return document.createRange().createContextualFragment(e);const t=document.createDocumentFragment(),s=document.createElement("div");return s.insertAdjacentHTML("afterBegin",e),t.appendChild(s),t};e.loadPageHandler=void 0;const qr={registerSargassoClass:Rr,bootSargasso:(t={})=>{if(t.scrollElement&&Er.setOptions(t),t.breakpoints){new Wr(document.body,t.breakpoints).start()}if(t.hijax){const s=new Ir(document.body,t.hijax);s.start(),e.loadPageHandler=s.setPage.bind(s)}else e.loadPageHandler=e=>{document.location.href=e};new Dr(document.body,t).start(t)},elementTools:_r,litHTML:fr},Ur={theDOMWatcher:jr,theScrollWatcher:Er,theResizeWatcher:Ar,theOrientationWatcher:Sr,theWorkerWatcher:kr,theObservableObjectWatcher:Nr};return e.ObservableObject=Or,e.Sargasso=Pr,e.services=Ur,e.utils=qr,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=sargasso.iife.min.js.map
